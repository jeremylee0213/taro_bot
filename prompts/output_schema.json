{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DailyTarotMirror_Output",
  "description": "Daily Tarot Mirror V2 - êµ¬ì¡°í™”ëœ ì¶œë ¥ ìŠ¤í‚¤ë§ˆ. Quick/Standard/Full ëª¨ë“œë³„ í•„ë“œ ì •ì˜.",

  "type": "object",
  "required": ["mode", "card", "one_liner", "keywords"],
  "properties": {
    "mode": {
      "type": "string",
      "enum": ["quick", "standard", "full"],
      "description": "ì‘ë‹µ ëª¨ë“œ"
    },

    "card": {
      "type": "object",
      "required": ["name_kr", "name_en", "number", "reversed", "emoji_art", "core_keywords"],
      "properties": {
        "name_kr": { "type": "string", "description": "ì¹´ë“œ í•œê¸€ëª… (ì˜ˆ: ë³„)" },
        "name_en": { "type": "string", "description": "ì¹´ë“œ ì˜ë¬¸ëª… (ì˜ˆ: The Star)" },
        "number": { "type": "integer", "minimum": 0, "maximum": 21, "description": "ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ ë²ˆí˜¸" },
        "reversed": { "type": "boolean", "description": "ì—­ë°©í–¥ ì—¬ë¶€" },
        "emoji_art": { "type": "string", "description": "ì´ëª¨ì§€ ì¡°í•© ì‹œê°í™” (ì˜ˆ: â­âœ¨ğŸŒŠ)" },
        "core_keywords": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 3,
          "maxItems": 3,
          "description": "í•µì‹¬ í‚¤ì›Œë“œ 3ê°œ"
        }
      }
    },

    "one_liner": {
      "type": "string",
      "description": "ì˜¤ëŠ˜ì˜ í•œì¤„ í•µì‹¬ ì¡°ì–¸"
    },

    "keywords": {
      "type": "array",
      "items": { "type": "string" },
      "minItems": 3,
      "maxItems": 5,
      "description": "í•´ì‹œíƒœê·¸ í‚¤ì›Œë“œ"
    },

    "guide": {
      "type": "object",
      "description": "[Standard/Full] ì ì‘í˜• ê°€ì´ë“œ - ì…ë ¥ ìœ í˜•ì— ë”°ë¼ í˜•ì‹ ë³€í™˜",
      "required": ["type", "content"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["timeline", "perspectives", "emotion_journey", "pros_cons"],
          "description": "ê°€ì´ë“œ í˜•ì‹ ìœ í˜•"
        },
        "title": { "type": "string", "description": "ê°€ì´ë“œ ì„¹ì…˜ ì œëª©" },
        "content": {
          "oneOf": [
            {
              "type": "array",
              "description": "timeline: ì‹œê°„ëŒ€ë³„ ì¡°ì–¸",
              "items": {
                "type": "object",
                "required": ["period", "icon", "advice"],
                "properties": {
                  "period": { "type": "string", "description": "ì‹œê°„ëŒ€ ë˜ëŠ” ì´ë²¤íŠ¸ëª…" },
                  "time": { "type": "string", "description": "êµ¬ì²´ì  ì‹œê°„ (ì„ íƒ)" },
                  "icon": { "type": "string", "description": "ì´ëª¨ì§€ ì•„ì´ì½˜" },
                  "advice": { "type": "string", "description": "ì¡°ì–¸ ë‚´ìš©" },
                  "energy": { "type": "string", "enum": ["high", "medium", "rest"], "description": "ì—ë„ˆì§€ ë ˆë²¨" },
                  "is_family_time": { "type": "boolean", "description": "ê°€ì¡± ì‹œê°„ ì—¬ë¶€ - trueì´ë©´ ë¶€ë“œëŸ¬ìš´ í†¤ ì ìš©" }
                }
              }
            },
            {
              "type": "array",
              "description": "perspectives: ê´€ì  ë¶„ê¸°í˜•",
              "items": {
                "type": "object",
                "required": ["label", "viewpoint"],
                "properties": {
                  "label": { "type": "string", "description": "ê´€ì  ë¼ë²¨ (A/B/C)" },
                  "viewpoint": { "type": "string", "description": "ê´€ì  ì„¤ëª…" }
                }
              }
            },
            {
              "type": "object",
              "description": "emotion_journey: ê°ì • ì—¬ì •",
              "required": ["current", "transition", "evening"],
              "properties": {
                "current": { "type": "string", "description": "í˜„ì¬ ê°ì • ì¸ì‹" },
                "transition": { "type": "string", "description": "ì¹´ë“œê°€ ì œì•ˆí•˜ëŠ” ì „í™˜" },
                "evening": { "type": "string", "description": "ì €ë… ë§ˆë¬´ë¦¬ ì œì•ˆ" }
              }
            },
            {
              "type": "array",
              "description": "pros_cons: í”„ë¡œ/ì½˜ ë¹„êµ",
              "items": {
                "type": "object",
                "required": ["option", "pros", "cons"],
                "properties": {
                  "option": { "type": "string" },
                  "pros": { "type": "array", "items": { "type": "string" } },
                  "cons": { "type": "array", "items": { "type": "string" } }
                }
              }
            }
          ]
        }
      }
    },

    "roundtable": {
      "type": "array",
      "description": "[Standard/Full] ë¦¬ë”ì‹­ ë¼ìš´ë“œí…Œì´ë¸”",
      "items": {
        "type": "object",
        "required": ["persona", "archetype", "emoji", "quote", "key_point"],
        "properties": {
          "persona": { "type": "string", "description": "í˜ë¥´ì†Œë‚˜ ì´ë¦„" },
          "archetype": { "type": "string", "description": "ì•„í‚¤íƒ€ì… ì„¤ëª…" },
          "emoji": { "type": "string", "description": "í˜ë¥´ì†Œë‚˜ ì´ëª¨ì§€" },
          "quote": { "type": "string", "description": "ë°œí™” ë‚´ìš©" },
          "key_point": { "type": "string", "description": "í•µì‹¬ 1ì¤„ ìš”ì•½" },
          "relation_to_prev": {
            "type": "string",
            "enum": ["agree", "counter", "extend", "independent"],
            "description": "[Full] ì´ì „ ë°œí™”ì™€ì˜ ê´€ê³„"
          }
        }
      }
    },

    "compass": {
      "type": "object",
      "description": "[Standard/Full] ìº¡í‹´Kì˜ ë‚˜ì¹¨ë°˜",
      "required": ["insight", "question"],
      "properties": {
        "insight": { "type": "string", "description": "í†µì°° 1ë¬¸ì¥" },
        "question": { "type": "string", "description": "ì—´ë¦° ì§ˆë¬¸ 1ê°œ" }
      }
    },

    "card_deep_reading": {
      "type": "object",
      "description": "[Full] ì¹´ë“œ ì‹¬í™” í•´ì„",
      "properties": {
        "upright": { "type": "string", "description": "ì •ë°©í–¥ í•´ì„" },
        "reversed": { "type": "string", "description": "ì—­ë°©í–¥ í•´ì„" },
        "contextual": { "type": "string", "description": "ì˜¤ëŠ˜ ìƒí™© ë§¥ë½ í•´ì„" }
      }
    },

    "image_prompt": {
      "type": "string",
      "description": "[Full] DALL-Eìš© ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ (Retro Pixel Art style)"
    },

    "meta": {
      "type": "object",
      "description": "ë‚´ë¶€ ë©”íƒ€ë°ì´í„° (ì‚¬ìš©ìì—ê²Œ ë¹„í‘œì‹œ)",
      "properties": {
        "card_selection_reason": { "type": "string", "description": "ì¹´ë“œ ì„ íƒ ê·¼ê±° 1ë¬¸ì¥" },
        "emotional_level": { "type": "integer", "minimum": 1, "maximum": 3, "description": "ê°ì§€ëœ ì •ì„œ ë ˆë²¨" },
        "input_type": { "type": "string", "enum": ["schedule", "concern", "emotion", "decision", "greeting"], "description": "ì…ë ¥ ìœ í˜• ë¶„ë¥˜" },
        "dependency_alert": { "type": "boolean", "description": "ì˜ì¡´ì„± ë°©ì§€ ë©”ì‹œì§€ íŠ¸ë¦¬ê±° ì—¬ë¶€" }
      }
    }
  }
}

(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6679:function(e,t,l){Promise.resolve().then(l.bind(l,9520))},9520:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return H}});var a=l(7437),r=l(2265);class s extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){if(this.state.hasError){var e;return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",style:{background:"var(--color-bg)"},children:(0,a.jsxs)("div",{className:"apple-card p-8 max-w-md w-full text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-4xl",children:"⚠️"}),(0,a.jsx)("h2",{className:"text-xl font-bold",style:{color:"var(--color-text)"},children:"오류가 발생했습니다"}),(0,a.jsx)("p",{className:"text-[15px]",style:{color:"var(--color-text-secondary)"},children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"알 수 없는 오류"}),(0,a.jsx)("button",{onClick:this.handleReset,className:"btn-primary px-6 py-3",children:"다시 시도"})]})})}return this.props.children}constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}}function n(e,t){let[l,a]=(0,r.useState)(t),[s,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&a(JSON.parse(t))}catch(t){console.error('Error reading localStorage key "'.concat(e,'":'),t)}n(!0)},[e]),[s?l:t,(0,r.useCallback)(t=>{a(l=>{let a=t instanceof Function?t(l):t;try{window.localStorage.setItem(e,JSON.stringify(a))}catch(t){console.error('Error setting localStorage key "'.concat(e,'":'),t)}return a})},[e])]}let o="ceo-planner-days";function c(){try{let e=localStorage.getItem(o);return e?JSON.parse(e):{}}catch(e){return{}}}function i(e,t,l){let a=e.map(e=>"".concat(e.startTime,"-").concat(e.endTime,"-").concat(e.title,"-").concat(e.priority,"-").concat(e.emotion)).join("|");return"analysis:".concat(a,":").concat(t,":").concat(l.sort().join(","))}let d=null;function u(e){try{let t=JSON.parse(e);return m(t)}catch(l){let t=e.match(/```(?:json)?\s*([\s\S]*?)```/);if(t)try{let e=JSON.parse(t[1]);return m(e)}catch(e){}return{timeline:[],schedule_tips:[],advisors:[],overall_tip:e.slice(0,100),neuro_tips:[],daily_neuro_summary:""}}}function m(e){let t=Array.isArray(e.timeline)?e.timeline.map((e,t)=>{var l,a,r;return{id:null!==(l=e.id)&&void 0!==l?l:t,start:e.start||"00:00",end:e.end||"00:00",title:e.title||"",priority:"high"===(a=e.priority)||"medium"===a||"low"===a?a:"medium",category:"work"===(r=e.category)||"family"===r||"personal"===r||"health"===r?r:"work"}}):[],l=Array.isArray(e.schedule_tips)?e.schedule_tips.map(e=>{var t;return{schedule_id:null!==(t=e.schedule_id)&&void 0!==t?t:0,tips:Array.isArray(e.tips)?e.tips:[]}}):[],a=Array.isArray(e.advisors)?e.advisors.map(e=>({name:e.name||"",initials:e.initials||"",comment:e.comment||""})):[],r=Array.isArray(e.neuro_tips)?e.neuro_tips.map(e=>{var t;return{emoji:e.emoji||"\uD83E\uDDE0",label:e.label||"",duration:null!==(t=e.duration)&&void 0!==t?t:10,reason:e.reason||""}}):[],s=Array.isArray(e.energy_chart)?e.energy_chart.map(e=>{var t,l;return{hour:null!==(t=e.hour)&&void 0!==t?t:9,level:Math.min(10,Math.max(1,null!==(l=e.level)&&void 0!==l?l:5)),label:e.label||""}}):void 0,n=Array.isArray(e.briefings)?e.briefings.map(e=>{var t;return{id:null!==(t=e.id)&&void 0!==t?t:0,title:e.title||"",tip:e.tip||"",prep:Array.isArray(e.prep)?e.prep:[]}}):void 0,o=Array.isArray(e.specialist_advice)?e.specialist_advice.map(e=>({emoji:e.emoji||"\uD83D\uDCA1",role:e.role||"",advice:e.advice||""})):void 0;return{timeline:t,schedule_tips:l,advisors:a,overall_tip:e.overall_tip||"",neuro_tips:r,daily_neuro_summary:e.daily_neuro_summary||"",energy_chart:s,briefings:n,specialist_advice:o}}var x=l(7271);let p=[{value:"high",label:"좋음",emoji:"\uD83D\uDE0A"},{value:"medium",label:"보통",emoji:"\uD83D\uDE10"},{value:"low",label:"낮음",emoji:"\uD83D\uDE14"}];function h(e){let{date:t,onDateChange:l,energyLevel:r,onEnergyChange:s,theme:n,onToggleTheme:o,onOpenSettings:c}=e;return(0,a.jsx)("header",{className:"apple-card px-5 py-4",style:{borderRadius:0,borderBottom:"1px solid var(--color-border)"},role:"banner",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",style:{color:"var(--color-text)"},children:"Daily CEO Planner"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:o,className:"text-xl w-11 h-11 flex items-center justify-center rounded-xl focus-ring","aria-label":"light"===n?"다크 모드로 전환":"라이트 모드로 전환",children:"light"===n?"\uD83C\uDF19":"☀️"}),(0,a.jsx)("button",{onClick:c,className:"text-xl w-11 h-11 flex items-center justify-center rounded-xl focus-ring","aria-label":"설정 열기",children:"⚙️"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-[17px] font-medium",style:{color:"var(--color-text-secondary)"},children:function(e){let t=new Date(e+"T00:00:00"),l=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),s=["일","월","화","수","목","금","토"][t.getDay()];return"".concat(l,"년 ").concat(a,"월 ").concat(r,"일 (").concat(s,")")}(t)}),(0,a.jsx)("input",{type:"date",value:t,onChange:e=>l(e.target.value),className:"text-[15px] px-3 py-2 rounded-lg focus-ring",style:{background:"var(--color-surface)",border:"1px solid var(--color-border)",color:"var(--color-text-secondary)"},"aria-label":"날짜 선택"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[15px]",style:{color:"var(--color-text-muted)"},children:"컨디션"}),(0,a.jsx)("select",{value:r,onChange:e=>s(e.target.value),className:"text-[16px] px-3 py-2 rounded-lg focus-ring",style:{background:"var(--color-surface)",border:"1px solid var(--color-border)",color:"var(--color-text)"},"aria-label":"오늘의 컨디션 선택",children:p.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})]})]})]})})}let f={work:{emoji:"\uD83D\uDCBC",label:"업무"},family:{emoji:"\uD83C\uDFE0",label:"가족"},personal:{emoji:"\uD83D\uDC64",label:"개인"},health:{emoji:"\uD83C\uDFC3",label:"건강"}};function v(e){let{onAnalyze:t}=e,[l,s]=(0,r.useState)(""),n=(0,r.useRef)(null),[o,c]=(0,r.useState)(null),[i,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{n.current&&(n.current.style.height="auto",n.current.style.height=Math.max(56,n.current.scrollHeight)+"px")},[l]);let x=(0,r.useMemo)(()=>(function(e){let t=[];for(let l of e.split(/[,\n.]+/).map(e=>e.trim()).filter(Boolean)){let e=l.match(/^(오전|오후)\s*/),a=(null==e?void 0:e[1])==="오후",r=(e?l.replace(/^(오전|오후)\s*/,""):l).match(/^(\d{1,2})(?::(\d{2}))?(?:시)?(?:반)?(?:\s*[~\-]\s*(\d{1,2})(?::(\d{2}))?(?:시)?(?:반)?)?\s+(.+)$/);if(r){let e=parseInt(r[1]),s=r[2]?parseInt(r[2]):0;l.includes("반")&&0===s&&(s=30),a&&e<12&&(e+=12);let n=r[3]?parseInt(r[3]):e+1,o=r[4]?parseInt(r[4]):0;r[3]&&a&&n<12&&(n+=12),n<=e&&!r[3]&&(n=e+1);let c="".concat(String(e).padStart(2,"0"),":").concat(String(s).padStart(2,"0")),i="".concat(String(n).padStart(2,"0"),":").concat(String(o).padStart(2,"0")),d=r[5].trim(),u="work";/운동|러닝|헬스|요가|산책|수영|걷기|조깅|스트레칭/.test(d)?u="health":/가족|아이|아내|남편|부모|저녁식사|데이트|아들|딸/.test(d)?u="family":/명상|독서|기록|일기|취미|영화|음악|휴식|낮잠|저널링/.test(d)&&(u="personal");let m="medium";/미팅|발표|면접|투자|계약|중요|프레젠|보고/.test(d)?m="high":/정리|메일|확인|체크|청소/.test(d)&&(m="low"),t.push({id:Date.now().toString(36)+Math.random().toString(36).substring(2,6),startTime:c,endTime:i,title:d,priority:m,category:u,emotion:"normal"})}}return t.sort((e,t)=>e.startTime.localeCompare(t.startTime))})(l),[l]),p=u||x,h=(0,r.useCallback)(e=>{c(e)},[]),v=(0,r.useCallback)((e,t)=>{e.preventDefault(),d(t)},[]),y=(0,r.useCallback)(e=>{if(null===o||o===e){c(null),d(null);return}let t=[...p],[l]=t.splice(o,1);t.splice(e,0,l),m(t),c(null),d(null)},[o,p]),g=(0,r.useCallback)(()=>{c(null),d(null)},[]);(0,r.useEffect)(()=>{m(null)},[l]);let D=e=>{let l=e?[]:p;(e||0!==l.length)&&t(l)};return(0,a.jsxs)("div",{className:"apple-card p-5 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"text-lg font-bold",style:{color:"var(--color-text)"},children:"오늘의 일정"})]}),(0,a.jsx)("textarea",{ref:n,value:l,onChange:e=>s(e.target.value),placeholder:"일정을 자유롭게 입력하세요\n예: 9시 투자자미팅, 11시 팀회의\n14시~16시 프로젝트, 18시 러닝",className:"w-full resize-none min-h-[80px] max-h-[300px] focus-ring",rows:3,style:{fontSize:"17px",lineHeight:"1.6"},"aria-label":"오늘의 일정 입력"}),p.length>0&&(0,a.jsxs)("div",{className:"space-y-2 fade-in",children:[(0,a.jsxs)("p",{className:"text-[14px] font-medium",style:{color:"var(--color-text-muted)"},children:["인식된 일정 (",p.length,"개) — 드래그로 순서 변경"]}),(0,a.jsx)("div",{className:"space-y-1.5",children:p.map((e,t)=>{var l;return(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>h(t),onDragOver:e=>v(e,t),onDrop:()=>y(t),onDragEnd:g,className:"flex items-center gap-3 py-2 px-3 rounded-xl transition-all ".concat(o===t?"dragging":""," ").concat(i===t&&o!==t?"drag-over":""),style:{background:"var(--color-surface)"},children:[(0,a.jsx)("span",{className:"drag-handle text-[14px]",style:{color:"var(--color-text-muted)"},children:"≡"}),(0,a.jsx)("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded-full text-white flex-shrink-0",style:{background:"high"===e.priority?"var(--color-priority-high)":"medium"===e.priority?"var(--color-priority-medium)":"var(--color-priority-low)"},children:"high"===e.priority?"높음":"medium"===e.priority?"보통":"낮음"}),(0,a.jsxs)("span",{className:"text-[15px]",style:{color:"var(--color-text-muted)"},children:[e.startTime,"~",e.endTime]}),(0,a.jsx)("span",{className:"text-[16px] font-medium flex-1",style:{color:"var(--color-text)"},children:e.title}),(0,a.jsx)("span",{className:"text-[14px]",children:null===(l=f[e.category])||void 0===l?void 0:l.emoji})]},e.id)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-1",children:[(0,a.jsx)("button",{onClick:()=>D(!1),disabled:0===p.length,className:"btn-primary py-4 disabled:opacity-40 text-[17px] focus-ring","aria-label":"일하는 날 분석 시작 (".concat(p.length,"개 일정)"),children:"\uD83D\uDCBC 일하는 날"}),(0,a.jsx)("button",{onClick:()=>D(!0),className:"btn-secondary py-4 text-[17px] focus-ring","aria-label":"쉬는 날 분석 시작",children:"\uD83D\uDECB️ 쉬는 날"})]}),0===p.length&&0===l.trim().length&&(0,a.jsxs)("div",{className:"text-center py-6 px-4 rounded-xl",style:{background:"var(--color-surface)"},children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full mb-3",style:{background:"var(--color-accent-light)"},"aria-hidden":"true",children:(0,a.jsx)("span",{className:"text-[28px]",children:"\uD83D\uDCCB"})}),(0,a.jsx)("p",{className:"text-[15px] font-medium mb-2",style:{color:"var(--color-text)"},children:"일정을 입력해 보세요"}),(0,a.jsxs)("p",{className:"text-[13px] leading-relaxed",style:{color:"var(--color-text-muted)"},children:['"9시 투자자미팅, 11시 팀회의" 같이',(0,a.jsx)("br",{}),"시간 + 할 일을 입력하면 자동 인식됩니다"]})]}),l.trim().length>0&&0===p.length&&(0,a.jsx)("p",{className:"text-center text-[14px] pt-1",style:{color:"var(--color-priority-high)"},children:'⚠️ 시간을 인식하지 못했어요 — "9시 회의" 형식으로 입력해주세요'})]})}let y=["일정을 분석하고 있습니다","에너지 패턴을 파악하고 있습니다","조언자의 인사이트를 준비합니다","최적의 전략을 수립합니다"];function g(e){let{progress:t,streamText:l}=e,s=Math.round(t.step/t.total*100),[n,o]=(0,r.useState)(0),[c,i]=(0,r.useState)(""),[d,u]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=setInterval(()=>{o(e=>(e+1)%y.length)},3e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{i(e=>e.length>=3?"":e+".")},500);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{u(e=>e+1)},1e3);return()=>clearInterval(e)},[]);let m=l?function(e){let t=null,l=[];try{let a;let r=e.match(/"overall_tip"\s*:\s*"([^"]+)"/);r&&(t=r[1]);let s=/"name"\s*:\s*"([^"]+)"/g;for(;null!==(a=s.exec(e));)!l.includes(a[1])&&l.length<5&&l.push(a[1])}catch(e){}return{overallTip:t,advisorNames:l}}(l):null;return(0,a.jsxs)("div",{className:"space-y-5 py-6 fade-in",role:"status","aria-live":"polite","aria-label":"분석 진행 중",children:[(0,a.jsxs)("div",{className:"apple-card p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"typing-indicator","aria-hidden":"true",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("p",{className:"text-[16px] font-medium",style:{color:"var(--color-text)"},children:[y[n],c]})}),(0,a.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,a.jsxs)("p",{className:"text-[13px] font-mono",style:{color:"var(--color-text-muted)"},children:[d,"s"]}),(0,a.jsx)("p",{className:"text-[11px]",style:{color:"var(--color-text-muted)"},children:"~15-30초"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-full rounded-full h-2.5 overflow-hidden",style:{background:"var(--color-border)"},role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"분석 진행률 ".concat(s,"%"),children:(0,a.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-700 progress-bar-animated",style:{width:"".concat(s,"%"),background:"var(--color-accent)"}})}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("p",{className:"text-[13px]",style:{color:"var(--color-text-muted)"},children:t.label}),(0,a.jsxs)("p",{className:"text-[13px] font-bold",style:{color:"var(--color-accent)"},children:[s,"%"]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-4",children:["프롬프트","AI 분석","결과 생성"].map((e,l)=>{let r=l+1,s=t.step>r,n=t.step===r;return(0,a.jsxs)("div",{className:"flex items-center gap-1.5 flex-1",children:[(0,a.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-[12px] font-bold flex-shrink-0",style:{background:s?"var(--color-success)":n?"var(--color-accent)":"var(--color-border)",color:s||n?"#fff":"var(--color-text-muted)"},children:s?"✓":r}),(0,a.jsx)("span",{className:"text-[12px] font-medium hidden sm:inline",style:{color:n?"var(--color-accent)":"var(--color-text-muted)"},children:e}),l<2&&(0,a.jsx)("div",{className:"flex-1 h-px",style:{background:s?"var(--color-success)":"var(--color-border)"}})]},l)})})]}),m&&(0,a.jsxs)("div",{className:"apple-card p-5 fade-in",children:[(0,a.jsx)("p",{className:"text-[12px] font-bold mb-3 tracking-wide",style:{color:"var(--color-accent)",letterSpacing:"0.05em"},children:"\uD83D\uDCE1 실시간 생성 중"}),m.overallTip&&(0,a.jsxs)("div",{className:"mb-3 rounded-lg p-3",style:{background:"var(--color-accent-light)"},children:[(0,a.jsx)("p",{className:"text-[11px] font-bold mb-1",style:{color:"var(--color-accent)"},children:"오늘의 핵심"}),(0,a.jsx)("p",{className:"text-[14px] font-medium",style:{color:"var(--color-text)"},children:m.overallTip})]}),m.advisorNames.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:m.advisorNames.map((e,t)=>(0,a.jsxs)("span",{className:"text-[12px] px-2.5 py-1 rounded-full font-medium",style:{background:"var(--color-surface)",color:"var(--color-text-secondary)",border:"1px solid var(--color-border)"},children:["\uD83D\uDCAC ",e]},t))}),!m.overallTip&&0===m.advisorNames.length&&(0,a.jsx)("p",{className:"text-[13px] font-mono",style:{color:"var(--color-text-muted)",whiteSpace:"pre-wrap",maxHeight:"60px",overflow:"hidden"},children:l.slice(-200)})]}),!l&&(0,a.jsxs)("div",{className:"space-y-4","aria-hidden":"true",children:[(0,a.jsxs)("div",{className:"apple-card p-4",children:[(0,a.jsx)("div",{className:"skeleton h-5 w-32 mb-3"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"skeleton h-10 w-full"}),(0,a.jsx)("div",{className:"skeleton h-10 w-4/5"}),(0,a.jsx)("div",{className:"skeleton h-10 w-11/12"})]})]}),(0,a.jsxs)("div",{className:"apple-card p-4",children:[(0,a.jsx)("div",{className:"skeleton h-5 w-24 mb-3"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"skeleton h-12 w-12 rounded-full flex-shrink-0"}),(0,a.jsx)("div",{className:"skeleton h-12 w-full"})]})]})]})]})}let D={high:{color:"var(--color-priority-high)",emoji:"\uD83D\uDD34",label:"높음",ariaLabel:"높은 중요도"},medium:{color:"var(--color-priority-medium)",emoji:"\uD83D\uDD35",label:"보통",ariaLabel:"보통 중요도"},low:{color:"var(--color-priority-low)",emoji:"⚪",label:"낮음",ariaLabel:"낮은 중요도"}},b={work:"\uD83D\uDCBC",family:"\uD83C\uDFE0",personal:"\uD83E\uDDD8",health:"\uD83C\uDFC3"};async function j(e){try{let{default:t}=await l.e(337).then(l.t.bind(l,4457,23)),a=await t(e,{backgroundColor:"#ffffff",scale:2,useCORS:!0});a.toBlob(async e=>{if(e)try{await navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(t){let e=document.createElement("a");e.download="schedule-item.png",e.href=a.toDataURL("image/png"),e.click()}},"image/png")}catch(e){}}async function N(e,t){try{let{default:a}=await l.e(337).then(l.t.bind(l,4457,23)),r=await a(e,{backgroundColor:"#ffffff",scale:2,useCORS:!0}),s=document.createElement("a");s.download="".concat(t,".png"),s.href=r.toDataURL("image/png"),s.click()}catch(e){}}function C(e){let{timeline:t,scheduleTips:l,briefings:r}=e;if(0===t.length)return null;let s=new Map;for(let e of l)s.set(e.schedule_id,e.tips);let n=new Map;if(r)for(let e of r)n.set(e.id,e);return(0,a.jsxs)("div",{className:"apple-card p-4 sm:p-6 fade-in",role:"region","aria-label":"오늘의 일정과 조언",children:[(0,a.jsx)("h3",{className:"text-[20px] sm:text-[22px] font-bold mb-4",style:{color:"var(--color-text)"},children:"\uD83D\uDCC5 오늘의 일정 + 조언"}),(0,a.jsx)("div",{className:"space-y-3",role:"list",children:t.map((e,t)=>(0,a.jsx)(k,{entry:e,index:t+1,tips:s.get(e.id),briefing:n.get(e.id)},e.id))})]})}function k(e){let{entry:t,index:l,tips:s,briefing:n}=e,o=(0,r.useRef)(null),c=D[t.priority]||D.medium,i=(0,r.useCallback)(()=>{o.current&&j(o.current)},[]),d=(0,r.useCallback)(()=>{o.current&&N(o.current,"schedule-".concat(l))},[l]);return(0,a.jsx)("div",{ref:o,className:"rounded-xl p-4 transition-all",style:{background:"var(--color-surface)",borderLeft:"4px solid ".concat(c.color)},role:"listitem","aria-label":"".concat(l,"번 일정: ").concat(t.title,", ").concat(t.start,"~").concat(t.end,", ").concat(c.ariaLabel),children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-7 h-7 rounded-full flex items-center justify-center text-[13px] font-bold text-white mt-0.5",style:{background:c.color},"aria-hidden":"true",children:l}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-[14px]","aria-hidden":"true",children:b[t.category]||"\uD83D\uDCCC"}),(0,a.jsxs)("span",{className:"text-[14px] sm:text-[15px] font-mono font-semibold",style:{color:"var(--color-accent)"},children:[t.start,"~",t.end]}),(0,a.jsx)("span",{className:"text-[11px] font-bold px-1.5 py-0.5 rounded-full",style:{background:c.color,color:"#fff"},children:c.label})]}),(0,a.jsx)("p",{className:"text-[17px] sm:text-[18px] font-bold mt-1",style:{color:"var(--color-text)"},children:t.title}),s&&s.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-1",children:s.map((e,t)=>(0,a.jsxs)("p",{className:"text-[14px] sm:text-[15px] leading-relaxed",style:{color:"var(--color-text-secondary)"},children:["\uD83D\uDCA1 ",e]},t))}),n&&(0,a.jsxs)("div",{className:"mt-2 pt-2",style:{borderTop:"1px dashed var(--color-border)"},children:[n.tip&&(0,a.jsxs)("p",{className:"text-[14px] sm:text-[15px] font-medium",style:{color:"var(--color-accent)"},children:["\uD83D\uDCCB ",n.tip]}),n.prep.length>0&&(0,a.jsx)("div",{className:"mt-1 space-y-0.5",children:n.prep.map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] sm:text-[14px]",style:{color:"var(--color-text-secondary)"},children:["✅ ",e]},t))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1.5 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:i,className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] transition-all hover:scale-110 focus-ring",style:{background:"var(--color-accent-light)"},"aria-label":"".concat(t.title," 클립보드 이미지 복사"),children:"\uD83D\uDCCB"}),(0,a.jsx)("button",{onClick:d,className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] transition-all hover:scale-110 focus-ring",style:{background:"var(--color-accent-light)"},"aria-label":"".concat(t.title," 이미지 저장"),children:"\uD83D\uDCF8"})]})]})})}function w(e){let{doses:t,energyData:l}=e;if(!t||0===t.length)return null;let r=function(e){let t=[];for(let l=300;l<=1380;l+=30){let a=l/60,r=0,s=[];for(let t of e){let[e,a]=t.time.split(":").map(Number),n=(l-(60*e+a))/60;if(n<0)continue;let o=t.doseMg/18,c=0;n<=1?c=.22*o*(1-Math.exp(-2.5*n))*10:n<=2?c=.22*o*10*Math.exp(-.693*(n-1)/1.5)+.78*o*((n-1)/6)*10:n<=6?c=.22*o*10*Math.exp(-.693*(n-1)/1.5)+.78*o*((n-1)/6)*10:n<=8?c=.22*o*10*Math.exp(-.693*(n-1)/1.5)+.78*o*10*(1-.05*(n-6)):n<=12?c=.78*o*9*Math.exp(-.693*(n-8)/3.5):(c=.78*o*9*Math.exp(-.693*(n-8)/3.5))<.2&&(c=0),r+=c,n>=.5&&n<1.5?s.push("".concat(t.doseMg,"mg 초기방출")):n>=6&&n<8?s.push("".concat(t.doseMg,"mg 피크")):n>=10&&n<11&&s.push("효과 감소")}t.push({hour:Math.round(10*a)/10,level:Math.round(100*Math.min(r,10))/100,label:s.join(" + ")||""})}return t}(t),s=Math.max(...r.map(e=>e.level),1),n=r.reduce((e,t)=>t.level>e.level?t:e,r[0]),o=l?[...l].sort((e,t)=>e.hour-t.hour):[],c=e=>32+(e-5)/18*358,i=e=>145-e/s*130,d=r.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(c(e.hour),",").concat(i(e.level))).join(" "),u="".concat(d," L ").concat(c(r[r.length-1].hour),",").concat(145," L ").concat(c(r[0].hour),",").concat(145," Z"),m=Math.round(n.hour);return(0,a.jsxs)("div",{className:"apple-card p-5 fade-in",children:[(0,a.jsx)("h3",{className:"text-[20px] font-bold mb-1",style:{color:"var(--color-text)"},children:"\uD83D\uDC8A 콘서타 농도 + ⚡ 에너지"}),(0,a.jsxs)("p",{className:"text-[14px] mb-3",style:{color:"var(--color-text-muted)"},children:[t.map(e=>"\uD83D\uDD50 ".concat(e.time," ").concat(e.doseMg,"mg")).join("  ")," \xb7 피크 ~",m,"시"]}),(0,a.jsx)("div",{style:{width:"100%",aspectRatio:"".concat(400,"/").concat(170),position:"relative"},children:(0,a.jsxs)("svg",{viewBox:"0 0 ".concat(400," ").concat(170),style:{width:"100%",height:"100%"},children:[[0,.25,.5,.75,1].map((e,t)=>(0,a.jsx)("line",{x1:32,y1:15+(1-e)*130,x2:390,y2:15+(1-e)*130,stroke:"var(--color-border)",strokeWidth:"0.5",strokeDasharray:0===e?"none":"3,3"},t)),(0,a.jsx)("path",{d:u,fill:"var(--color-accent)",opacity:"0.1"}),(0,a.jsx)("path",{d:d,fill:"none",stroke:"var(--color-accent)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.map((e,t)=>{let l=c(e.hour)-6,r=e.level/10*130,s=e.level>=7?"var(--color-success)":e.level>=4?"var(--color-warning)":"var(--color-danger)";return(0,a.jsx)("rect",{x:l,y:145-r,width:12,height:r,rx:3,fill:s,opacity:.25},t)}),(0,a.jsx)("circle",{cx:c(n.hour),cy:i(n.level),r:"5",fill:"var(--color-accent)"}),(0,a.jsx)("circle",{cx:c(n.hour),cy:i(n.level),r:"9",fill:"var(--color-accent)",opacity:"0.15"}),t.map((e,t)=>{let[l,r]=e.time.split(":").map(Number),s=c(l+r/60);return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:s,y1:15,x2:s,y2:145,stroke:"var(--color-warning)",strokeWidth:"1.2",strokeDasharray:"4,3"}),(0,a.jsxs)("text",{x:s,y:12,textAnchor:"middle",fill:"var(--color-warning)",fontSize:"9",fontWeight:"bold",children:["\uD83D\uDC8A",e.doseMg,"mg"]})]},t)}),[5,8,11,14,17,20,23].map(e=>(0,a.jsxs)("text",{x:c(e),y:167,textAnchor:"middle",fill:"var(--color-text-muted)",fontSize:"10",children:[e,"시"]},e)),(0,a.jsx)("line",{x1:37,y1:18,x2:57,y2:18,stroke:"var(--color-accent)",strokeWidth:"2.5"}),(0,a.jsx)("text",{x:60,y:21,fill:"var(--color-accent)",fontSize:"8",children:"콘서타"}),o.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("rect",{x:102,y:14,width:8,height:8,rx:2,fill:"var(--color-success)",opacity:.4}),(0,a.jsx)("text",{x:114,y:21,fill:"var(--color-text-muted)",fontSize:"8",children:"에너지"})]})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.map((e,t)=>(0,a.jsxs)("span",{className:"text-[13px] px-3 py-1.5 rounded-full font-semibold",style:{background:"var(--color-warning)",color:"#fff"},children:["\uD83D\uDC8A ",e.time," \xb7 ",e.doseMg,"mg"]},t)),(0,a.jsxs)("span",{className:"text-[13px] px-3 py-1.5 rounded-full font-semibold",style:{background:"var(--color-accent)",color:"#fff"},children:["\uD83D\uDD1D 피크 ~",m,"시"]})]})]})}let S=["#007aff","#34c759","#ff9500"];async function E(e){try{let{default:t}=await l.e(337).then(l.t.bind(l,4457,23)),a=await t(e,{backgroundColor:"#ffffff",scale:2,useCORS:!0});a.toBlob(async e=>{if(e)try{await navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(t){let e=document.createElement("a");e.download="advisor.png",e.href=a.toDataURL("image/png"),e.click()}},"image/png")}catch(e){}}async function _(e,t){try{let{default:a}=await l.e(337).then(l.t.bind(l,4457,23)),r=await a(e,{backgroundColor:"#ffffff",scale:2,useCORS:!0}),s=document.createElement("a");s.download="".concat(t,".png"),s.href=r.toDataURL("image/png"),s.click()}catch(e){}}function A(e){let{advisors:t,onChangeAdvisors:l}=e;return 0===t.length?null:(0,a.jsxs)("div",{className:"apple-card p-4 sm:p-6 space-y-4 fade-in",role:"region","aria-label":"조언자 인사이트",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-[20px] sm:text-[22px] font-bold",style:{color:"var(--color-text)"},children:"\uD83D\uDCAC 조언자 인사이트"}),(0,a.jsx)("button",{onClick:l,className:"text-[15px] font-semibold px-4 py-2.5 rounded-xl focus-ring",style:{color:"var(--color-accent)",background:"var(--color-accent-light)"},"aria-label":"조언자 변경",children:"\uD83D\uDD04 변경"})]}),(0,a.jsx)("div",{className:"space-y-4",role:"list",children:t.map((e,t)=>(0,a.jsx)(B,{advisor:e,index:t+1},t))})]})}function B(e){let{advisor:t,index:l}=e,s=(0,r.useRef)(null),n=function(e){let t=e.toLowerCase();for(let[e,l]of[[["일론","elon","musk"],"\uD83D\uDE80"],[["워런","warren","buffett","버핏"],"\uD83D\uDCB0"],[["사티아","satya","nadella","나델라"],"☁️"],[["제프","jeff","bezos","베조스"],"\uD83D\uDCE6"],[["레이","ray","dalio","달리오"],"\uD83D\uDCD0"],[["스티브","steve","jobs","잡스"],"\uD83C\uDF4E"],[["빌","bill","gates","게이츠"],"\uD83D\uDDA5️"],[["젠슨","jensen","huang","황"],"\uD83C\uDFAE"],[["브레네","bren\xe9","brown","브라운"],"\uD83D\uDC97"],[["아담","adam","grant","그랜트"],"\uD83D\uDCDA"],[["오프라","oprah","winfrey","윈프리"],"✨"],[["마이클","michael","jordan","조던"],"\uD83C\uDFC0"],[["필","phil","jackson","잭슨"],"\uD83E\uDDD8"],[["이건희","lee"],"\uD83C\uDFE2"],[["방시혁","bang"],"\uD83C\uDFB5"],[["유재석"],"\uD83D\uDE04"],[["손흥민"],"⚽"],[["김연아"],"⛸️"],[["bts","방탄"],"\uD83C\uDFA4"],[["예수","jesus"],"✝️"],[["부처","buddha"],"☸️"],[["공자","confucius"],"\uD83D\uDCDC"],[["아인슈타인","einstein"],"⚛️"],[["나폴레옹","napoleon"],"⚔️"],[["처칠","churchill"],"\uD83C\uDFA9"]])if(e.some(e=>t.includes(e)))return l;return"\uD83D\uDCA1"}(t.name),o=(0,r.useCallback)(()=>{s.current&&E(s.current)},[]),c=(0,r.useCallback)(()=>{s.current&&_(s.current,"advisor-".concat(l))},[l]),i=t.comment.replace(/([.!?])\s+/g,"$1\n\n").trim();return(0,a.jsx)("div",{ref:s,className:"rounded-xl p-4",style:{background:"var(--color-surface)",borderLeft:"4px solid ".concat(S[(l-1)%S.length])},role:"listitem","aria-label":"조언자 ".concat(l,": ").concat(t.name),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-shrink-0","aria-hidden":"true",children:[(0,a.jsx)("div",{className:"w-11 h-11 rounded-full flex items-center justify-center text-[20px]",style:{backgroundColor:S[(l-1)%S.length]+"20"},children:n}),(0,a.jsxs)("span",{className:"text-[11px] font-bold px-1.5 py-0.5 rounded-full text-white",style:{background:S[(l-1)%S.length]},children:["#",l]})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-[17px] sm:text-[18px] font-bold mb-2",style:{color:"var(--color-text)"},children:[n," ",t.name]}),(0,a.jsxs)("div",{className:"text-[15px] sm:text-[16px] leading-[1.8] whitespace-pre-line",style:{color:"var(--color-text-secondary)"},children:["“",i,"”"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1.5 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:o,className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] transition-all hover:scale-110 focus-ring",style:{background:"var(--color-accent-light)"},"aria-label":"".concat(t.name," 조언 클립보드 이미지 복사"),children:"\uD83D\uDCCB"}),(0,a.jsx)("button",{onClick:c,className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] transition-all hover:scale-110 focus-ring",style:{background:"var(--color-accent-light)"},"aria-label":"".concat(t.name," 조언 이미지 저장"),children:"\uD83D\uDCF8"})]})]})})}function M(e){let{isOpen:t,onClose:l,allAdvisors:s,selectedIds:n,onSave:o}=e,[c,i]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,x]=(0,r.useState)("");if(!t)return null;let p=[c,d,m].filter(e=>e.trim()).length;return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,a.jsxs)("div",{className:"rounded-2xl w-[92%] max-w-md max-h-[85vh] flex flex-col",style:{background:"var(--color-card)",border:"1px solid var(--color-border)"},children:[(0,a.jsxs)("div",{className:"px-5 py-4",style:{borderBottom:"1px solid var(--color-border)"},children:[(0,a.jsx)("h2",{className:"text-[18px] font-bold",style:{color:"var(--color-text)"},children:"\uD83D\uDCAC 조언자 설정"}),(0,a.jsx)("p",{className:"text-[14px] mt-1",style:{color:"var(--color-text-muted)"},children:"원하는 3명의 조언자를 직접 입력하세요"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,a.jsx)("div",{className:"space-y-3",children:[{value:c,set:i,label:"1번 조언자",emoji:"\uD83E\uDD47"},{value:d,set:u,label:"2번 조언자",emoji:"\uD83E\uDD48"},{value:m,set:x,label:"3번 조언자",emoji:"\uD83E\uDD49"}].map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-[14px] font-semibold mb-1 block",style:{color:"var(--color-text-secondary)"},children:[e.emoji," ",e.label]}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:t=>e.set(t.target.value),placeholder:"예: 일론 머스크, 유재석, 손흥민...",className:"w-full",style:{fontSize:"16px"}})]},t))}),(0,a.jsx)("button",{onClick:()=>{var e,t,l;let a=[...s].sort(()=>Math.random()-.5);i((null===(e=a[0])||void 0===e?void 0:e.name)||""),u((null===(t=a[1])||void 0===t?void 0:t.name)||""),x((null===(l=a[2])||void 0===l?void 0:l.name)||"")},className:"w-full py-3 rounded-xl text-[16px] font-semibold transition-all",style:{background:"var(--color-accent-light)",color:"var(--color-accent)",border:"1.5px dashed var(--color-accent)"},children:"\uD83C\uDFB2 랜덤 추천"}),(0,a.jsxs)("div",{className:"rounded-xl p-3",style:{background:"var(--color-surface)"},children:[(0,a.jsx)("p",{className:"text-[13px] font-semibold mb-2",style:{color:"var(--color-text-muted)"},children:"⚡ 빠른 선택 (클릭하면 빈칸에 추가)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:s.map(e=>(0,a.jsx)("button",{onClick:()=>{c.trim()?d.trim()?m.trim()||x(e.name):u(e.name):i(e.name)},className:"text-[12px] px-2.5 py-1 rounded-lg transition-all",style:{background:"var(--color-bg)",color:"var(--color-text-secondary)",border:"1px solid var(--color-border)"},children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"px-5 py-4 flex justify-end gap-3",style:{borderTop:"1px solid var(--color-border)"},children:[(0,a.jsx)("button",{onClick:l,className:"px-5 py-2.5 rounded-xl text-[15px] font-medium",style:{color:"var(--color-text-muted)"},children:"취소"}),(0,a.jsxs)("button",{onClick:()=>{let e=[c,d,m].map(e=>e.trim()).filter(Boolean);if(0===e.length)return;let t=[],a=[];for(let l of e){let e=s.find(e=>e.name===l||e.nameEn.toLowerCase()===l.toLowerCase()||e.initials.toLowerCase()===l.toLowerCase());e?t.push(e.id):a.push(l)}o(t,a.length>0?a:void 0),l()},disabled:0===p,className:"btn-primary px-6 py-2.5 text-[15px] rounded-xl disabled:opacity-50",children:["✅ 저장 (",p,"/3)"]})]})]})})}let T=[{value:"gpt-4o",label:"GPT-4o"},{value:"gpt-4o-mini",label:"GPT-4o Mini"},{value:"gpt-4.1",label:"GPT-4.1"},{value:"gpt-4.1-mini",label:"GPT-4.1 Mini"},{value:"gpt-4.5-preview",label:"GPT-4.5 Preview"},{value:"gpt-5.2",label:"GPT-5.2"}];function I(e){let{isOpen:t,onClose:l,apiKey:s,onSaveApiKey:n,model:o,onSaveModel:c,profile:i,onSaveProfile:d}=e,[u,m]=(0,r.useState)("api"),[x,p]=(0,r.useState)(s),[h,f]=(0,r.useState)(o),[v,y]=(0,r.useState)(i);if((0,r.useEffect)(()=>{p(s),f(o),y(i)},[s,o,i,t]),!t)return null;let g=v.concertaDoses||[],D=(e,t,l)=>{let a=[...g];"time"===t&&(a[e]={...a[e],time:l}),"doseMg"===t&&(a[e]={...a[e],doseMg:Number(l)}),y({...v,concertaDoses:a})},b=e=>{y({...v,concertaDoses:g.filter((t,l)=>l!==e)})};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,a.jsxs)("div",{className:"apple-card w-[92%] max-w-md p-6 space-y-5",style:{maxHeight:"85vh",overflowY:"auto"},children:[(0,a.jsx)("h2",{className:"text-[22px] font-bold",style:{color:"var(--color-text)"},children:"⚙️ 설정"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>m("api"),className:"flex-1 py-2.5 rounded-xl text-[16px] font-semibold transition-all",style:{background:"api"===u?"var(--color-accent)":"var(--color-surface)",color:"api"===u?"#fff":"var(--color-text-secondary)"},children:"\uD83D\uDD11 API 설정"}),(0,a.jsx)("button",{onClick:()=>m("profile"),className:"flex-1 py-2.5 rounded-xl text-[16px] font-semibold transition-all",style:{background:"profile"===u?"var(--color-accent)":"var(--color-surface)",color:"profile"===u?"#fff":"var(--color-text-secondary)"},children:"\uD83D\uDC64 내 프로필"})]}),"api"===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83D\uDD11 OpenAI API Key"}),(0,a.jsx)("input",{type:"password",value:x,onChange:e=>p(e.target.value),placeholder:"sk-...",className:"w-full"}),(0,a.jsx)("p",{className:"text-[14px]",style:{color:"var(--color-text-muted)"},children:"\uD83D\uDD12 브라우저에만 저장됩니다"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83E\uDD16 모델"}),(0,a.jsx)("select",{value:h,onChange:e=>f(e.target.value),className:"w-full",children:T.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),"profile"===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83E\uDDE0 기질 특성"}),(0,a.jsx)("input",{type:"text",value:v.traits.join(", "),onChange:e=>y({...v,traits:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"조용한 ADHD, HSP",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83D\uDC8A 복용 약물"}),(0,a.jsx)("input",{type:"text",value:v.medications.join(", "),onChange:e=>y({...v,medications:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"아토목신 10mg, 콘서타 27mg",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83D\uDC8A 콘서타 복용 스케줄"}),(0,a.jsx)("p",{className:"text-[13px]",style:{color:"var(--color-text-muted)"},children:"복용 시간과 용량을 입력하면 농도 곡선이 생성됩니다"}),g.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-xl",style:{background:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[(0,a.jsx)("span",{className:"text-[18px]",children:"\uD83D\uDD50"}),(0,a.jsx)("input",{type:"time",value:e.time,onChange:e=>D(t,"time",e.target.value),className:"flex-1",style:{minWidth:"100px"}}),(0,a.jsx)("select",{value:e.doseMg,onChange:e=>D(t,"doseMg",Number(e.target.value)),className:"flex-1",children:[17,18,27,36,54].map(e=>(0,a.jsxs)("option",{value:e,children:[e,"mg"]},e))}),(0,a.jsx)("button",{onClick:()=>b(t),className:"text-[18px] p-1",style:{color:"var(--color-danger)"},children:"✕"})]},t)),(0,a.jsx)("button",{onClick:()=>{y({...v,concertaDoses:[...g,{time:"08:00",doseMg:27}]})},className:"w-full py-2.5 rounded-xl text-[15px] font-semibold",style:{background:"var(--color-accent-light)",color:"var(--color-accent)",border:"1.5px dashed var(--color-accent)"},children:"➕ 복용 시간 추가"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83C\uDFAF 선호 활동"}),(0,a.jsx)("input",{type:"text",value:v.preferences.join(", "),onChange:e=>y({...v,preferences:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"러닝, 명상, 독서",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83D\uDE34 수면 목표"}),(0,a.jsx)("input",{type:"text",value:v.sleepGoal,onChange:e=>y({...v,sleepGoal:e.target.value}),placeholder:"23:00~07:00",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[16px] font-semibold",style:{color:"var(--color-text)"},children:"\uD83D\uDCDD 메모"}),(0,a.jsx)("textarea",{value:v.notes,onChange:e=>y({...v,notes:e.target.value}),placeholder:"기타 참고사항",className:"w-full h-20 resize-none"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("button",{onClick:l,className:"btn-secondary flex-1 py-3",children:"취소"}),(0,a.jsx)("button",{onClick:()=>{n(x.trim()),c(h),d(v),l()},className:"btn-primary flex-1 py-3",children:"\uD83D\uDCBE 저장"})]})]})})}let O="ceo-planner-saved-advice";function L(){try{let e=localStorage.getItem(O);return e?JSON.parse(e):[]}catch(e){return[]}}function J(e){let{isOpen:t,onClose:l}=e,[s,n]=(0,r.useState)([]);(0,r.useEffect)(()=>{t&&n(L())},[t]);let o=e=>{!function(e){let t=L().filter(t=>t.id!==e);localStorage.setItem(O,JSON.stringify(t))}(e),n(L())},c=async e=>{let t=["\uD83D\uDCC5 ".concat(e.date),"\uD83D\uDCA1 ".concat(e.overallTip),"",...e.advisors.map(e=>"\uD83D\uDCAC ".concat(e.name,': "').concat(e.comment,'"')),e.neuroSummary?"\n\uD83E\uDDE0 ".concat(e.neuroSummary):""].join("\n");try{await navigator.clipboard.writeText(t)}catch(l){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black/40",onClick:l,"aria-hidden":"true"}),(0,a.jsxs)("div",{className:"fixed top-0 right-0 z-50 h-full flex flex-col transition-transform duration-300",role:"dialog","aria-modal":"true","aria-label":"저장된 조언 목록",style:{width:"min(380px, 85vw)",background:"var(--color-card)",borderLeft:"1px solid var(--color-border)",boxShadow:"var(--shadow-lg)",transform:t?"translateX(0)":"translateX(100%)"},children:[(0,a.jsxs)("div",{className:"px-5 py-4 flex items-center justify-between",style:{borderBottom:"1px solid var(--color-border)"},children:[(0,a.jsx)("h2",{className:"text-[18px] font-bold",style:{color:"var(--color-text)"},children:"\uD83D\uDCDA 저장된 조언"}),(0,a.jsx)("button",{onClick:l,className:"text-[22px] w-11 h-11 flex items-center justify-center rounded-xl focus-ring",style:{color:"var(--color-text-muted)"},"aria-label":"저장 패널 닫기",children:"✕"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===s.length&&(0,a.jsxs)("div",{className:"text-center py-16 px-4",children:[(0,a.jsx)("div",{className:"mb-6","aria-hidden":"true",children:(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full mb-3",style:{background:"var(--color-accent-light)"},children:(0,a.jsx)("span",{className:"text-[40px]",children:"\uD83D\uDCED"})})}),(0,a.jsx)("p",{className:"text-[18px] font-bold mb-2",style:{color:"var(--color-text)"},children:"아직 저장된 조언이 없어요"}),(0,a.jsxs)("p",{className:"text-[14px] mb-6 leading-relaxed",style:{color:"var(--color-text-muted)"},children:["일정을 분석한 후",(0,a.jsx)("br",{}),"\uD83D\uDCBE 저장 버튼을 눌러 보관하세요"]}),(0,a.jsx)("button",{onClick:l,className:"px-6 py-3 rounded-xl text-[15px] font-bold",style:{background:"var(--color-accent)",color:"#fff"},"aria-label":"일정 분석하러 가기",children:"일정 분석하러 가기"})]}),s.map(e=>(0,a.jsxs)("div",{className:"rounded-xl p-4",style:{background:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-[14px] font-semibold",style:{color:"var(--color-accent)"},children:["\uD83D\uDCC5 ",e.date]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>c(e),className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] focus-ring",style:{color:"var(--color-accent)",background:"var(--color-accent-light)"},"aria-label":"".concat(e.date," 조언 복사"),children:"\uD83D\uDCCB"}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] focus-ring",style:{color:"var(--color-danger)"},"aria-label":"".concat(e.date," 조언 삭제"),children:"\uD83D\uDDD1️"})]})]}),(0,a.jsxs)("p",{className:"text-[15px] font-semibold mb-2",style:{color:"var(--color-text)"},children:["\uD83D\uDCA1 ",e.overallTip]}),e.advisors.map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] mb-1",style:{color:"var(--color-text-secondary)"},children:["\uD83D\uDCAC ",(0,a.jsx)("strong",{children:e.name}),": ",e.comment.length>60?e.comment.slice(0,60)+"...":e.comment]},t)),e.neuroSummary&&(0,a.jsxs)("p",{className:"text-[12px] mt-1",style:{color:"var(--color-text-muted)"},children:["\uD83E\uDDE0 ",e.neuroSummary.length>50?e.neuroSummary.slice(0,50)+"...":e.neuroSummary]})]},e.id))]})]})]})}let F={traits:["조용한 ADHD","HSP"],medications:["아토목신 10mg","아리피졸 2mg","콘서타 27mg 오전","콘서타 17mg 오후"],preferences:["러닝","수면","독서","명상","기록"],sleepGoal:"23:00~07:00",notes:"",concertaDoses:[{time:"08:00",doseMg:27},{time:"13:00",doseMg:17}]},P=[{id:"em",name:"일론 머스크",nameEn:"Elon Musk",initials:"EM",description:"본질 집중, 과감한 결단",style:"visionary"},{id:"wb",name:"워런 버핏",nameEn:"Warren Buffett",initials:"WB",description:"장기적 가치, 인내",style:"investor"},{id:"sn",name:"사티아 나델라",nameEn:"Satya Nadella",initials:"SN",description:"성장 마인드셋, 공감",style:"leader"},{id:"jb",name:"제프 베조스",nameEn:"Jeff Bezos",initials:"JB",description:"고객 집중, Day 1 정신",style:"founder"},{id:"rd",name:"레이 달리오",nameEn:"Ray Dalio",initials:"RD",description:"원칙 중심, 시스템 사고",style:"strategist"},{id:"sj",name:"스티브 잡스",nameEn:"Steve Jobs",initials:"SJ",description:"단순함의 미학, 완벽주의",style:"creative"},{id:"bg",name:"빌 게이츠",nameEn:"Bill Gates",initials:"BG",description:"체계적 분석, 효율",style:"analyst"},{id:"jh",name:"젠슨 황",nameEn:"Jensen Huang",initials:"JH",description:"끈기, 비전 중심",style:"builder"},{id:"bn",name:"브레네 브라운",nameEn:"Bren\xe9 Brown",initials:"BN",description:"취약성의 용기, 공감",style:"empathy"},{id:"ac",name:"아담 그랜트",nameEn:"Adam Grant",initials:"AC",description:"기버 정신, 재고",style:"thinker"},{id:"on",name:"오프라 윈프리",nameEn:"Oprah Winfrey",initials:"ON",description:"자기 인식, 감사",style:"motivator"},{id:"mj",name:"마이클 조던",nameEn:"Michael Jordan",initials:"MJ",description:"승부 근성, 절대 기준",style:"competitor"},{id:"pj",name:"필 잭슨",nameEn:"Phil Jackson",initials:"PJ",description:"마음챙김, 팀 조화",style:"zen"},{id:"lg",name:"이건희",nameEn:"Lee Kun-hee",initials:"LG",description:"위기의식, 질적 경영",style:"reformer"},{id:"by",name:"방시혁",nameEn:"Bang Si-hyuk",initials:"BY",description:"콘텐츠 직관, 글로벌",style:"content"}],R=["em","wb","sn"];function G(e,t){let l=["\uD83D\uDCC5 ".concat(e," Daily CEO Planner"),"","\uD83D\uDCA1 오늘의 핵심",t.overall_tip,"","\uD83D\uDCC5 일정:",...t.timeline.map((e,t)=>"  ".concat(t+1,". ").concat(e.start,"~").concat(e.end," ").concat(e.title)),"","\uD83D\uDCAC 조언:",...t.advisors.map(e=>"  ".concat(e.name,': "').concat(e.comment,'"')),""];return t.specialist_advice&&t.specialist_advice.length>0&&(l.push("\uD83C\uDFE5 전문가 인사이트:"),t.specialist_advice.forEach(e=>{l.push("  ".concat(e.emoji," ").concat(e.role,": ").concat(e.advice))}),l.push("")),t.daily_neuro_summary&&l.push("\uD83E\uDDE0 ".concat(t.daily_neuro_summary)),l.join("\n")}function z(){let[e,t]=(0,r.useState)(new Date().toISOString().split("T")[0]),[s,m]=function(){let[e,t]=(0,r.useState)("light");return(0,r.useEffect)(()=>{let e=localStorage.getItem("ceo-planner-theme");e?(t(e),document.documentElement.setAttribute("data-theme",e)):window.matchMedia("(prefers-color-scheme: dark)").matches&&(t("dark"),document.documentElement.setAttribute("data-theme","dark"))},[]),[e,(0,r.useCallback)(()=>{t(e=>{let t="light"===e?"dark":"light";return document.documentElement.setAttribute("data-theme",t),localStorage.setItem("ceo-planner-theme",t),t})},[])]}(),[p,f]=n("ceo-planner-apikey",""),[y,D]=n("ceo-planner-model","gpt-4o"),[b,j]=n("ceo-planner-advisors",R),[N,k]=n("ceo-planner-custom-advisors",[]),[S,E]=n("ceo-planner-profile",F),[_,B]=n("ceo-planner-detail-mode","short"),{energyLevel:T,isLoaded:z,updateSchedules:H,updateEnergyLevel:W,updateCompletedCount:q}=function(e){let[t,l]=(0,r.useState)([]),[a,s]=(0,r.useState)("medium"),[n,i]=(0,r.useState)(""),[d,u]=(0,r.useState)(0),[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let t=c()[e];t?(l(t.schedules||[]),s(t.energyLevel||"medium"),i(t.review||""),u(t.completedCount||0)):(l([]),s("medium"),i(""),u(0)),x(!0)},[e]);let p=(0,r.useCallback)((t,l,a,r)=>{let s=c();s[e]={date:e,schedules:t,energyLevel:l,review:a,completedCount:r},localStorage.setItem(o,JSON.stringify(s))},[e]),h=(0,r.useCallback)(e=>{l(t=>{let l=e(t);return p(l,a,n,d),l})},[a,n,d,p]),f=(0,r.useCallback)(e=>{s(e),p(t,e,n,d)},[t,n,d,p]),v=(0,r.useCallback)(e=>{i(e),p(t,a,e,d)},[t,a,d,p]),y=(0,r.useCallback)(e=>{u(e),p(t,a,n,e)},[t,a,n,p]);return{schedules:t,energyLevel:a,review:n,completedCount:d,isLoaded:m,updateSchedules:h,updateEnergyLevel:f,updateReview:v,updateCompletedCount:y,getWeeklyStats:(0,r.useCallback)(()=>{let t=c(),l=new Date(e),a=l.getDay(),r=new Date(l);r.setDate(l.getDate()-(a+6)%7);let s=0,n=0;for(let e=0;e<7;e++){let l=new Date(r);l.setDate(r.getDate()+e);let a=t[l.toISOString().split("T")[0]];if(a){var o;s+=(null===(o=a.schedules)||void 0===o?void 0:o.length)||0,n+=a.completedCount||0}}return{totalSchedules:s,totalCompleted:n}},[e])}}(e),[K,U]=(0,r.useState)("form"),[$,X]=(0,r.useState)(null),[Y,Z]=(0,r.useState)(!1),[Q,V]=(0,r.useState)({step:0,total:3,label:""}),[ee,et]=(0,r.useState)(null),[el,ea]=(0,r.useState)(""),[er,es]=(0,r.useState)(""),[en,eo]=(0,r.useState)(!1),[ec,ei]=(0,r.useState)(!1),[ed,eu]=(0,r.useState)(!1),em=(0,r.useRef)([]),ex=(0,r.useRef)(null),ep=(0,r.useRef)(0),{setCache:eh}={getCached:(0,r.useCallback)((e,t,l)=>{try{let a=i(e,t,l),r=sessionStorage.getItem(a);return r?JSON.parse(r):null}catch(e){return null}},[]),setCache:(0,r.useCallback)((e,t,l,a)=>{try{let r=i(e,t,l);sessionStorage.setItem(r,JSON.stringify(a))}catch(e){}},[])},ef=(0,r.useCallback)(async(e,t)=>{if(!p){eo(!0);return}let l=0===e.length;H(()=>e),em.current=e;let a=t||b,r=P.filter(e=>a.includes(e.id));Z(!0),et(null),ea(""),U("result");try{var s,n,o,c;V({step:1,total:3,label:"\uD83D\uDD27 프롬프트 준비 중..."});let t=function(e){let{schedules:t,energyLevel:l,advisors:a,advisorTone:r,profile:s,detailMode:n,isRestDay:o,customAdvisorNames:c}=e,i=d||(d='# Daily CEO Planner — AI 일정 코치\n\n당신은 하루 일정을 분석하는 AI 코치입니다.\n사용자의 ADHD/HSP 기질과 약물 타이밍을 고려합니다.\n\n## 상세도 모드 (detail_mode)\n\n### short (일반)\n- overall_tip: 1~2문장 핵심 전략\n- schedule_tips: 필요한 것만, 각 15자\n- advisors: 각 1~2문장 (30자)\n- neuro_tips: 2개, 각 한 줄\n- daily_neuro_summary: 20자\n- energy_chart, briefings: 생략\n- specialist_advice: 5명 전문가 각 핵심 1문장\n\n### long (상세)\n- overall_tip: 전략적 분석 3~5문장\n- schedule_tips: 모든 일정에 준비물/꿀팁/리마인드\n- advisors: 각 3~5문장, 심층 조언 + 구체적 액션\n- neuro_tips: 5개, 과학적 근거 포함\n- daily_neuro_summary: 종합 뇌과학 분석 5~7문장\n- energy_chart: 시간별 에너지 예측 + 상세 라벨\n- briefings: 모든 일정에 대해 제공 (tip + prep 2~3개)\n- specialist_advice: 5명 전문가 각 2~3문장 구체적 조언\n\n## 조언자 (advisors) 규칙\n- 사용자가 지정한 조언자 이름으로 조언 생성\n- 해당 인물의 실제 철학/스타일을 반영하여 조언\n- initials는 이름의 영문 이니셜 (없으면 한글 초성)\n- 조언자가 실존 인물이 아니어도 해당 캐릭터에 맞는 조언 생성\n- 톤은 상황에 맞게 자동 조절: 긴급/중요한 일정이면 직설적, 일상/여유 일정이면 격려\n- 시니어 전문가가 핵심만 짚어주는 톤으로 작성 (불필요한 수식어 없이)\n\n## specialist_advice 규칙\n5명의 전문가 관점에서 오늘 일정에 맞는 구체적 조언:\n1. emoji: "\uD83E\uDDE0", role: "심리상담가" — 감정 관리, 스트레스 대처\n2. emoji: "\uD83D\uDE97", role: "운전전문가" — 이동 동선, 안전, 피로 관리\n3. emoji: "\uD83D\uDCBB", role: "생산성전문가" — 업무 효율, 집중력, 도구 활용\n4. emoji: "\uD83D\uDE4F", role: "영성전문가" — 마음 챙김, 감사, 내적 평화\n5. emoji: "\uD83E\uDD57", role: "영양사" — 식사 타이밍, 영양, 에너지 관리\n\n## energy_chart 규칙\n- hour: 7~22 중 활동 시간대\n- level: 1~10 (약물 피크=8~10, 약효 감소=4~5, 식후=3~4)\n- label: "콘서타 피크", "점심 후 저하", "오후 복용 효과" 등 짧게\n\n## 출력 형식\n반드시 JSON으로만 응답. 마크다운/코드블록 사용 금지.\n\n\n---\n\n## Reference: Advisor Pool\n# Advisor Pool — 조언자 후보 15명\n\n## 비즈니스 리더\n\n### EM — 일론 머스크 (Elon Musk)\n- 스타일: 본질 집중, 불필요한 것 제거, 과감한 결단\n- 격려: "넌 이미 답을 알고 있어. 실행만 남았어."\n- 직설: "10가지 중 1개만 남겨. 나머지는 노이즈야."\n\n### WB — 워런 버핏 (Warren Buffett)\n- 스타일: 장기적 가치, 인내, 복리의 힘\n- 격려: "오늘의 작은 결정이 10년 후를 만들어."\n- 직설: "이해 못하는 건 투자하지 마. 시간도 마찬가지야."\n\n### SN — 사티아 나델라 (Satya Nadella)\n- 스타일: 성장 마인드셋, 공감, 학습 문화\n- 격려: "모든 미팅은 배움의 기회야. 호기심을 가져."\n- 직설: "Learn-it-all이 돼. Know-it-all은 성장을 멈춰."\n\n### JB — 제프 베조스 (Jeff Bezos)\n- 스타일: 고객 집중, Day 1 정신, 역방향 사고\n- 격려: "결과가 아닌 과정에 집중하면 결과는 따라와."\n- 직설: "상대방의 시간도 네 시간만큼 소중해. 준비해."\n\n### RD — 레이 달리오 (Ray Dalio)\n- 스타일: 원칙 중심, 급진적 투명성, 시스템 사고\n- 격려: "실수는 학습이야. 기록하고 패턴을 찾아."\n- 직설: "감정이 아니라 원칙으로 결정해."\n\n## 기술/창의 리더\n\n### SJ — 스티브 잡스 (Steve Jobs)\n- 스타일: 단순함의 미학, 완벽주의, 인문학+기술\n- 격려: "단순하게 만들어. 그게 가장 어렵고 가장 아름다워."\n- 직설: "A급이 아닌 건 다 B급이야. 기준을 낮추지 마."\n\n### BG — 빌 게이츠 (Bill Gates)\n- 스타일: 체계적 분석, 독서를 통한 통찰, 효율 극대화\n- 격려: "준비한 만큼 자신감이 생겨. 데이터가 너를 지켜줄 거야."\n- 직설: "1시간 준비로 3시간을 아낄 수 있어."\n\n### JM — 젠슨 황 (Jensen Huang)\n- 스타일: 끈기, 고통의 가치, 비전 중심\n- 격려: "고통은 성장의 신호야. 포기하지 마."\n- 직설: "속도보다 방향이야. 방향이 맞으면 속도는 따라와."\n\n## 심리/인문 리더\n\n### BN — 브레네 브라운 (Bren\xe9 Brown)\n- 스타일: 취약성의 용기, 진정성, 공감 리더십\n- 격려: "완벽하지 않아도 돼. 진짜 모습이 가장 강해."\n- 직설: "불편함을 피하면 성장도 피하는 거야."\n\n### AC — 아담 그랜트 (Adam Grant)\n- 스타일: 기버(Giver) 정신, 재고(Think Again), 과학적 접근\n- 격려: "네가 도운 만큼 돌아올 거야. 관계에 투자해."\n- 직설: "확신이 클수록 다시 생각해봐."\n\n### ON — 오프라 윈프리 (Oprah Winfrey)\n- 스타일: 자기 인식, 감사, 스토리텔링의 힘\n- 격려: "오늘 감사한 3가지를 떠올려. 에너지가 달라질 거야."\n- 직설: "남의 기대가 아니라 네 진심을 따라."\n\n## 스포츠/퍼포먼스\n\n### MJ — 마이클 조던 (Michael Jordan)\n- 스타일: 승부 근성, 실패를 연료로, 절대 기준\n- 격려: "실패할수록 성공에 가까워지고 있는 거야."\n- 직설: "연습에서 안 되는 건 실전에서도 안 돼."\n\n### PJ — 필 잭슨 (Phil Jackson)\n- 스타일: 마음챙김, 팀 조화, 선(禅) 리더십\n- 격려: "한 호흡 쉬어. 마음이 고요해야 판이 보여."\n- 직설: "혼자 다 하려고 하지 마. 팀을 믿어."\n\n## 한국 리더\n\n### LG — 이건희 (Lee Kun-hee)\n- 스타일: 위기의식, 질적 경영, 변화 주도\n- 격려: "마누라와 자식 빼고 다 바꿔라. 변할 용기가 있으면 돼."\n- 직설: "2류로 만족하면 3류가 돼. 1등만 살아남아."\n\n### BY — 방시혁 (Bang Si-hyuk)\n- 스타일: 콘텐츠 직관, 글로벌 사고, 팬 중심\n- 격려: "네 진심이 담긴 일은 반드시 통해."\n- 직설: "트렌드를 쫓지 말고 만들어."\n\n\n---\n\n## Output JSON Schema\nJSON으로만 응답. 코드블록 금지.\n\n{\n  "type": "object",\n  "required": ["timeline", "schedule_tips", "advisors", "overall_tip", "neuro_tips", "daily_neuro_summary", "specialist_advice"],\n  "properties": {\n    "timeline": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "required": ["id", "start", "end", "title", "priority", "category"],\n        "properties": {\n          "id": { "type": "number" },\n          "start": { "type": "string" },\n          "end": { "type": "string" },\n          "title": { "type": "string" },\n          "priority": { "type": "string", "enum": ["high", "medium", "low"] },\n          "category": { "type": "string", "enum": ["work", "family", "personal", "health"] }\n        }\n      }\n    },\n    "schedule_tips": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "required": ["schedule_id", "tips"],\n        "properties": {\n          "schedule_id": { "type": "number" },\n          "tips": { "type": "array", "items": { "type": "string" } }\n        }\n      }\n    },\n    "advisors": {\n      "type": "array",\n      "minItems": 3,\n      "maxItems": 3,\n      "items": {\n        "type": "object",\n        "required": ["name", "initials", "comment"],\n        "properties": {\n          "name": { "type": "string" },\n          "initials": { "type": "string" },\n          "comment": { "type": "string" }\n        }\n      }\n    },\n    "overall_tip": { "type": "string" },\n    "neuro_tips": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "required": ["emoji", "label", "duration", "reason"],\n        "properties": {\n          "emoji": { "type": "string" },\n          "label": { "type": "string" },\n          "duration": { "type": "number" },\n          "reason": { "type": "string" }\n        }\n      }\n    },\n    "daily_neuro_summary": { "type": "string" },\n    "energy_chart": {\n      "type": "array",\n      "description": "long 모드에서만 제공",\n      "items": {\n        "type": "object",\n        "required": ["hour", "level", "label"],\n        "properties": {\n          "hour": { "type": "number" },\n          "level": { "type": "number", "minimum": 1, "maximum": 10 },\n          "label": { "type": "string" }\n        }\n      }\n    },\n    "briefings": {\n      "type": "array",\n      "description": "long 모드에서만 제공",\n      "items": {\n        "type": "object",\n        "required": ["id", "title", "tip", "prep"],\n        "properties": {\n          "id": { "type": "number" },\n          "title": { "type": "string" },\n          "tip": { "type": "string" },\n          "prep": { "type": "array", "items": { "type": "string" } }\n        }\n      }\n    },\n    "specialist_advice": {\n      "type": "array",\n      "description": "5명 전문가 조언 (항상 제공)",\n      "minItems": 5,\n      "maxItems": 5,\n      "items": {\n        "type": "object",\n        "required": ["emoji", "role", "advice"],\n        "properties": {\n          "emoji": { "type": "string" },\n          "role": { "type": "string" },\n          "advice": { "type": "string" }\n        }\n      }\n    }\n  }\n}\n'),u=[...a.map(e=>"".concat(e.name," (").concat(e.initials,")")),...c||[]].slice(0,3).join(", ");return[{role:"system",content:i},{role:"user",content:"## 분석 요청\n\ndetail_mode: ".concat(n," (").concat({short:"짧게 (일반)",medium:"중간",long:"길게 (상세)"}[n],")\n프로필: ").concat(function(e){let t=[];return e.traits.length>0&&t.push("기질: ".concat(e.traits.join(", "))),e.medications.length>0&&t.push("약물: ".concat(e.medications.join(", "))),e.preferences.length>0&&t.push("선호: ".concat(e.preferences.join(", "))),e.sleepGoal&&t.push("수면: ".concat(e.sleepGoal)),e.notes&&t.push("메모: ".concat(e.notes)),t.join("\n")}(s),"\n컨디션: ").concat(l,"\n조언자: ").concat(u," (톤: 상황에 맞게 자동 조절 — 긴급하면 직설, 일상이면 격려)\n").concat(o?"모드: 쉬는 날\n":"","\n일정:\n").concat(0===t.length?"(일정 없음)":[...t].sort((e,t)=>e.startTime.localeCompare(t.startTime)).map((e,t)=>"".concat(t+1,". ").concat(e.startTime,"~").concat(e.endTime," ").concat(e.title," [").concat(e.priority,"/").concat(e.category,"]")).join("\n"),'\n\n**지시**: detail_mode="').concat(n,'" 규칙을 정확히 따르세요.').concat("short"!==n?" energy_chart와 briefings를 반드시 포함하세요.":"").concat("long"===n?"\n\n**전문가 인사이트 (specialist_advice)**: 반드시 다음 5명의 전문가 관점에서 조언을 추가하세요:\n1. \uD83E\uDDE0 시니어 심리상담가 — 감정 관리, 스트레스 대처\n2. \uD83D\uDE97 운전/이동 전문가 — 이동 동선, 안전 운전 팁\n3. \uD83D\uDCBB 개발자/생산성 전문가 — 업무 효율, 집중력\n4. \uD83D\uDE4F 종교인/영성 전문가 — 마음 챙김, 감사, 내적 평화\n5. \uD83E\uDD57 영양사 — 식사 타이밍, 영양, 에너지 관리\n\n각 전문가는 emoji, role, advice 필드를 포함합니다. advice는 오늘 일정에 맞는 구체적 조언 2~3문장.":"\n\n**전문가 인사이트 (specialist_advice)**: 다음 5명의 전문가 관점에서 핵심 한줄 조언을 추가하세요:\n1. \uD83E\uDDE0 심리상담가 2. \uD83D\uDE97 운전전문가 3. \uD83D\uDCBB 생산성전문가 4. \uD83D\uDE4F 영성전문가 5. \uD83E\uDD57 영양사\n각 전문가는 emoji, role, advice(핵심 1문장) 필드를 포함합니다.")}]}({schedules:e,energyLevel:T,advisors:r,advisorTone:"encouraging",profile:S,detailMode:"short"===_?"short":"long",isRestDay:l,customAdvisorNames:N});V({step:2,total:3,label:"\uD83E\uDD16 AI 분석 중..."});let i=new x.ZP({apiKey:p,dangerouslyAllowBrowser:!0}),m=["gpt-5.2","gpt-4.5-preview","gpt-4.1","gpt-4.1-mini","o1","o1-mini","o3","o3-mini","o4-mini"].some(e=>y.startsWith(e)),h="short"===_?4096:8192;if(["o1","o3"].some(e=>y.startsWith(e))){let l=await i.chat.completions.create({model:y,messages:t,response_format:{type:"json_object"},...m?{max_completion_tokens:h}:{max_tokens:h}}),r=(null===(n=l.choices[0])||void 0===n?void 0:null===(s=n.message)||void 0===s?void 0:s.content)||"";V({step:3,total:3,label:"✅ 완료!"});let o=u(r);X(o),eh(e,T,a,o)}else{let l=await i.chat.completions.create({model:y,messages:t,response_format:{type:"json_object"},stream:!0,...m?{max_completion_tokens:h}:{max_tokens:h}}),r="";for await(let e of l){let t=(null===(c=e.choices[0])||void 0===c?void 0:null===(o=c.delta)||void 0===o?void 0:o.content)||"";r+=t,ea(r)}V({step:3,total:3,label:"✅ 완료!"});let s=u(r);X(s),eh(e,T,a,s)}q(e.length)}catch(t){let e=t instanceof Error?t.message:"알 수 없는 오류";e.includes("401")||e.includes("Incorrect API key")?et("\uD83D\uDD11 API 키가 올바르지 않습니다."):e.includes("429")?et("⏳ 요청이 너무 많습니다. 잠시 후 다시 시도해주세요."):et("❌ 오류: ".concat(e))}finally{Z(!1),ea("")}},[p,y,T,b,N,S,_,eh,q,H]),ev=(0,r.useCallback)((e,t)=>{j(e),t&&k(t),ei(!1),em.current.length>0&&ef(em.current,e)},[j,k,ef]),ey=(0,r.useCallback)(()=>{$&&(!function(e){let t=L();t.unshift(e),localStorage.setItem(O,JSON.stringify(t.slice(0,50)))}({id:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,6)),date:e,overallTip:$.overall_tip||"",advisors:$.advisors.map(e=>({name:e.name,comment:e.comment})),neuroSummary:$.daily_neuro_summary,timestamp:Date.now()}),es("✅ 저장됨!"),setTimeout(()=>es(""),2e3))},[$,e]),eg=(0,r.useCallback)(async()=>{if(!$)return;let t=G(e,$);try{await navigator.clipboard.writeText(t)}catch(e){}es("\uD83D\uDCCB 복사됨!"),setTimeout(()=>es(""),2e3)},[$,e]),eD=(0,r.useCallback)(async()=>{if(!$)return;let t=G(e,$);if(navigator.share)try{await navigator.share({title:"\uD83D\uDCC5 ".concat(e," Daily CEO Planner"),text:t});return}catch(e){}try{await navigator.clipboard.writeText(t)}catch(e){}es("\uD83D\uDCCB 공유 텍스트 복사됨! 카카오톡/이메일에 붙여넣기하세요"),setTimeout(()=>es(""),3e3)},[$,e]),eb=(0,r.useCallback)(async()=>{if(ex.current)try{let{default:t}=await l.e(337).then(l.t.bind(l,4457,23)),a=await t(ex.current,{backgroundColor:"#ffffff",scale:2,useCORS:!0}),r=document.createElement("a");r.download="ceo-planner-".concat(e,".png"),r.href=a.toDataURL("image/png"),r.click()}catch(e){es("❌ 이미지 저장 실패"),setTimeout(()=>es(""),2e3)}},[e]),ej=(0,r.useCallback)(async()=>{let t=document.getElementById("summary-card");if(t)try{let{default:a}=await l.e(337).then(l.t.bind(l,4457,23)),r=await a(t,{backgroundColor:"#ffffff",scale:2,useCORS:!0}),s=document.createElement("a");s.download="ceo-summary-".concat(e,".png"),s.href=r.toDataURL("image/png"),s.click()}catch(e){es("❌ 이미지 저장 실패"),setTimeout(()=>es(""),2e3)}},[e]),eN=(0,r.useCallback)(e=>{ep.current=e.touches[0].clientX},[]),eC=(0,r.useCallback)(l=>{let a=l.changedTouches[0].clientX-ep.current;if(Math.abs(a)>80){let l=new Date(e);l.setDate(l.getDate()+(a>0?-1:1)),t(l.toISOString().split("T")[0])}},[e]),ek=S.concertaDoses&&S.concertaDoses.length>0;return z?(0,a.jsxs)("div",{className:"min-h-screen swipe-container",style:{background:"var(--color-bg)"},onTouchStart:"result"===K?eN:void 0,onTouchEnd:"result"===K?eC:void 0,children:[(0,a.jsx)("a",{href:"#main-content",className:"skip-link",children:"본문으로 건너뛰기"}),(0,a.jsx)(h,{date:e,onDateChange:t,energyLevel:T,onEnergyChange:W,theme:s,onToggleTheme:m,onOpenSettings:()=>eo(!0)}),(0,a.jsxs)("main",{id:"main-content",className:"max-w-4xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-6 space-y-5",children:["form"===K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"apple-card p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-[17px] sm:text-[19px] font-bold",style:{color:"var(--color-text)"},children:"\uD83D\uDCCA 분석 모드"}),(0,a.jsx)("button",{onClick:()=>eu(!0),className:"text-[14px] font-semibold px-4 py-2.5 rounded-xl focus-ring",style:{color:"var(--color-accent)",background:"var(--color-accent-light)"},"aria-label":"저장된 기록 열기",children:"\uD83D\uDCDA 기록"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",role:"radiogroup","aria-label":"분석 모드 선택",children:["short","medium"].map(e=>{let t="short"===e?"short"===_:"short"!==_;return(0,a.jsx)("button",{onClick:()=>B(e),className:"py-3.5 rounded-xl text-[16px] sm:text-[17px] font-bold transition-all focus-ring",style:{background:t?"var(--color-accent)":"var(--color-surface)",color:t?"#fff":"var(--color-text-secondary)",border:t?"none":"1px solid var(--color-border)"},role:"radio","aria-checked":t,"aria-label":"short"===e?"일반 모드: 핵심 조언만 간결하게":"상세 모드: 전문가별 상세 조언",children:"short"===e?"\uD83D\uDCCC 일반":"\uD83D\uDCD6 상세"},e)})}),(0,a.jsx)("p",{className:"text-[13px] sm:text-[14px] mt-2",style:{color:"var(--color-text-muted)"},children:"short"===_?"⚡ 핵심 조언만 간결하게":"\uD83D\uDCD6 전문가별 상세 조언 + 에너지 차트 + 브리핑"})]}),(0,a.jsx)(v,{onAnalyze:ef})]}),"result"===K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("nav",{className:"flex items-center justify-between","aria-label":"결과 네비게이션",children:[(0,a.jsx)("button",{onClick:()=>{U("form"),et(null)},className:"text-[17px] sm:text-[18px] font-bold px-3 py-2.5 rounded-xl focus-ring",style:{color:"var(--color-accent)"},"aria-label":"일정 입력으로 돌아가기",children:"← 돌아가기"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:()=>eu(!0),className:"w-11 h-11 rounded-xl flex items-center justify-center text-[16px] font-semibold focus-ring",style:{color:"var(--color-accent)",background:"var(--color-accent-light)"},"aria-label":"저장된 기록 열기",children:"\uD83D\uDCDA"})})]}),Y&&(0,a.jsx)(g,{progress:Q,streamText:el||void 0}),ee&&(0,a.jsxs)("div",{className:"apple-card p-5 fade-in",style:{borderLeft:"4px solid var(--color-danger)"},role:"alert",children:[(0,a.jsx)("p",{className:"text-[17px] sm:text-[18px] mb-3",style:{color:"var(--color-text)"},children:ee}),(0,a.jsx)("button",{onClick:()=>ef(em.current),className:"btn-primary px-5 py-3 focus-ring","aria-label":"분석 다시 시도",children:"\uD83D\uDD04 다시 시도"})]}),$&&!Y&&(0,a.jsxs)("div",{ref:ex,className:"space-y-5 fade-in",children:[$.overall_tip&&(0,a.jsxs)("div",{className:"apple-card p-6 sm:p-8",style:{borderLeft:"6px solid var(--color-accent)",background:"linear-gradient(135deg, var(--color-accent-light), var(--color-card))",boxShadow:"var(--shadow-lg)"},role:"region","aria-label":"오늘의 핵심 전략",children:[(0,a.jsx)("p",{className:"text-[13px] sm:text-[14px] font-bold mb-3 tracking-wide",style:{color:"var(--color-accent)",letterSpacing:"0.08em",textTransform:"uppercase"},children:"\uD83D\uDCA1 오늘의 핵심"}),(0,a.jsx)("p",{className:"text-[20px] sm:text-[26px] font-bold whitespace-pre-line",style:{color:"var(--color-text)",lineHeight:"1.6"},children:$.overall_tip.replace(/([.!?])\s+/g,"$1\n")})]}),(0,a.jsx)(C,{timeline:$.timeline,scheduleTips:$.schedule_tips,briefings:$.briefings}),ek&&(0,a.jsx)(w,{doses:S.concertaDoses,energyData:$.energy_chart}),(0,a.jsx)(A,{advisors:$.advisors,onChangeAdvisors:()=>ei(!0)}),$.specialist_advice&&$.specialist_advice.length>0&&(0,a.jsxs)("div",{className:"apple-card p-4 sm:p-6 fade-in",style:{boxShadow:"var(--shadow-sm)"},role:"region","aria-label":"전문가 인사이트",children:[(0,a.jsx)("h3",{className:"text-[17px] sm:text-[19px] font-bold mb-3",style:{color:"var(--color-text-secondary)"},children:"\uD83C\uDFE5 전문가 인사이트"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:$.specialist_advice.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-xl p-3.5",style:{background:"var(--color-surface)",borderLeft:"3px solid var(--color-border)"},children:[(0,a.jsxs)("p",{className:"text-[14px] sm:text-[15px] font-bold mb-1.5",style:{color:"var(--color-text)"},children:[e.emoji," ",e.role]}),(0,a.jsx)("p",{className:"text-[13px] sm:text-[14px] leading-[1.7] whitespace-pre-line",style:{color:"var(--color-text-secondary)"},children:e.advice.replace(/([.!?])\s+/g,"$1\n")})]},t))})]}),$.daily_neuro_summary&&(0,a.jsxs)("div",{className:"apple-card p-4 sm:p-6 fade-in",style:{borderLeft:"4px solid var(--color-neuro)"},children:[(0,a.jsx)("h3",{className:"text-[20px] sm:text-[22px] font-bold mb-3",style:{color:"var(--color-text)"},children:"\uD83E\uDDE0 뇌과학 인사이트"}),(0,a.jsx)("p",{className:"text-[16px] sm:text-[17px] font-medium mb-4 whitespace-pre-line",style:{color:"var(--color-text)",lineHeight:"1.7"},children:$.daily_neuro_summary.replace(/([.!?])\s+/g,"$1\n")}),$.neuro_tips.length>0&&(0,a.jsx)("div",{className:"space-y-3",children:$.neuro_tips.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-[18px] flex-shrink-0 mt-0.5",children:e.emoji}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-[15px] sm:text-[16px] font-bold",style:{color:"var(--color-text)"},children:[e.label," \xb7 ",e.duration,"분"]}),(0,a.jsx)("p",{className:"text-[14px] sm:text-[15px] leading-relaxed mt-0.5",style:{color:"var(--color-text-secondary)"},children:e.reason})]})]},t))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",role:"toolbar","aria-label":"결과 액션",children:[(0,a.jsx)("button",{onClick:ey,className:"py-3.5 rounded-xl text-[14px] sm:text-[15px] font-bold focus-ring",style:{background:"var(--color-accent)",color:"#fff"},"aria-label":"분석 결과 저장",children:"\uD83D\uDCBE 저장"}),(0,a.jsx)("button",{onClick:eg,className:"py-3.5 rounded-xl text-[14px] sm:text-[15px] font-bold focus-ring",style:{background:"var(--color-surface)",color:"var(--color-accent)",border:"1.5px solid var(--color-accent)"},"aria-label":"전체 텍스트 복사",children:"\uD83D\uDCCB 복사"}),(0,a.jsx)("button",{onClick:eb,className:"py-3.5 rounded-xl text-[14px] sm:text-[15px] font-bold focus-ring",style:{background:"var(--color-surface)",color:"var(--color-text-secondary)",border:"1.5px solid var(--color-border)"},"aria-label":"전체 결과 이미지로 저장",children:"\uD83D\uDCF8 전체 이미지"}),(0,a.jsx)("button",{onClick:eD,className:"py-3.5 rounded-xl text-[14px] sm:text-[15px] font-bold focus-ring",style:{background:"var(--color-success)",color:"#fff"},"aria-label":"결과 공유하기",children:"\uD83D\uDCE4 공유하기"})]}),er&&(0,a.jsx)("p",{className:"text-center text-[14px] sm:text-[15px] font-semibold fade-in",role:"status",style:{color:"var(--color-success)"},children:er}),(0,a.jsxs)("div",{id:"summary-card",className:"apple-card p-5 sm:p-7 fade-in",style:{background:"linear-gradient(135deg, var(--color-card), var(--color-accent-light))"},children:[(0,a.jsxs)("p",{className:"text-[12px] sm:text-[13px] font-bold mb-1 tracking-wide",style:{color:"var(--color-accent)",letterSpacing:"0.05em"},children:["\uD83D\uDCC5 ",e]}),(0,a.jsxs)("p",{className:"text-[18px] sm:text-[20px] font-bold mb-5 whitespace-pre-line",style:{color:"var(--color-text)",lineHeight:"1.6"},children:["\uD83D\uDCA1 ",$.overall_tip]}),(0,a.jsx)("div",{className:"space-y-1.5 mb-5",style:{borderLeft:"3px solid var(--color-accent)",paddingLeft:"12px"},children:$.timeline.slice(0,6).map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] sm:text-[14px]",style:{color:"var(--color-text-secondary)"},children:[(0,a.jsxs)("span",{className:"font-bold",style:{color:"var(--color-text)"},children:[t+1,"."]})," ","\uD83D\uDD50 ",e.start,"~",e.end," ",(0,a.jsx)("strong",{children:e.title})]},e.id))}),(0,a.jsx)("div",{className:"space-y-2",children:$.advisors.slice(0,3).map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] sm:text-[14px] leading-relaxed",style:{color:"var(--color-text-secondary)"},children:["\uD83D\uDCAC ",(0,a.jsx)("strong",{children:e.name}),": ",e.comment.length>60?e.comment.slice(0,60)+"...":e.comment]},t))}),(0,a.jsx)("p",{className:"text-[11px] mt-5 text-right",style:{color:"var(--color-text-muted)"},children:"Daily CEO Planner"})]}),(0,a.jsx)("button",{onClick:ej,className:"w-full py-3.5 rounded-xl text-[15px] sm:text-[16px] font-bold focus-ring",style:{background:"var(--color-accent)",color:"#fff"},"aria-label":"핵심 카드 이미지로 저장",children:"\uD83D\uDCF8 핵심 카드 이미지 저장"})]})]})]}),(0,a.jsx)(I,{isOpen:en,onClose:()=>eo(!1),apiKey:p,onSaveApiKey:f,model:y,onSaveModel:D,profile:S,onSaveProfile:E}),(0,a.jsx)(M,{isOpen:ec,onClose:()=>ei(!1),allAdvisors:P,selectedIds:b,onSave:ev}),(0,a.jsx)(J,{isOpen:ed,onClose:()=>eu(!1)})]}):(0,a.jsx)("div",{className:"min-h-screen",style:{background:"var(--color-bg)"}})}function H(){return(0,a.jsx)(s,{children:(0,a.jsx)(z,{})})}}},function(e){e.O(0,[271,971,117,744],function(){return e(e.s=6679)}),_N_E=e.O()}]);